build:
    steps:
      
      - add-to-known_hosts:
          hostname: tk2-213-16244.vs.sakura.ne.jp

      - mktemp:
          envvar: PRIVATEKEY_PATH    

      - create-file:
          name: Create private key
          filename: $PRIVATEKEY_PATH
          content: $DEPROY_KEYS_PRIVATE
          overwrite: true

      - script: 
          name: Remove no need assets
          code: |
           rm -rf CNAME
           rm -rf .gitignore
           rm -rf hexo-rpp-negativewords.txt
           rm -rf wercker.yml

      - script:
          name: Transfer data
          code: |
            PORT=${PORT}
            USER=${USER}
            tar cvz /pipeline/source/* | ssh -i $PRIVATEKEY_PATH -p $PORT -o StrictHostKeyChecking=no -o UserKnownHostsFile=no tk2-213-16244.vs.sakura.ne.jp tar zxv -C /home/$USER/
